{% extends 'base.html' %}
{% block title %}Reset Password - Sankalp{% endblock %}
{% block content %}

<div class="container mt-5" style="max-width: 400px;">
  <h4 class="fw-bold text-success mb-3 text-center">Reset Your Password</h4>
  
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <form method="POST">
    {% csrf_token %}
    <input type="hidden" name="token" value="{{ token }}">

    <div class="mb-3 position-relative">
      <label class="form-label fw-semibold">New Password</label>
      <div class="input-group">
        <input type="password" name="password" class="form-control" placeholder="Enter new password" required>
        <button type="button" class="btn btn-outline-secondary toggle-password" tabindex="-1">
          <i class="bi bi-eye-slash"></i>
        </button>
      </div>
    </div>

    <div class="mb-3 position-relative">
      <label class="form-label fw-semibold">Confirm Password</label>
      <div class="input-group">
        <input type="password" name="confirm" class="form-control" placeholder="Confirm new password" required>
        <button type="button" class="btn btn-outline-secondary toggle-password" tabindex="-1">
          <i class="bi bi-eye-slash"></i>
        </button>
      </div>
    </div>

    <button type="submit" class="btn btn-success w-100 py-2">Update Password</button>
  </form>

  <p class="mt-3 text-center">
    <a href="{% url 'login' %}" class="text-decoration-none text-primary fw-semibold">Back to Login</a>
  </p>
</div>

<!-- Bootstrap Icons for eye icon -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<script>
  document.querySelectorAll('.toggle-password').forEach(button => {
    button.addEventListener('click', function () {
      const input = this.previousElementSibling;
      const icon = this.querySelector('i');

      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.replace('bi-eye-slash', 'bi-eye');
      } else {
        input.type = 'password';
        icon.classList.replace('bi-eye', 'bi-eye-slash');
      }
    });
  });
</script>

{% endblock %}
