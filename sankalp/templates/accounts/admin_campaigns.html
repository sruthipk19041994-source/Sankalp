{% extends 'base.html' %}
{% block title %}Admin - Manage Campaigns{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">ğŸ“Š Admin Campaign Management</h2>
    <p class="text-muted">View, approve, and schedule all campaign categories from one place.</p>
    <hr class="w-25 mx-auto">
  </div>

  <!-- Tabs -->
  <ul class="nav nav-tabs mb-4" id="campaignTabs" role="tablist">
    <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#education" role="tab">ğŸ“ Education</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#medical" role="tab">ğŸ¥ Medical</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#legal" role="tab">âš–ï¸ Legal</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#women" role="tab">ğŸŒ¸ Women Support</a></li>
  </ul>

  <div class="tab-content">

    <!-- ğŸ“ Education -->
    <div class="tab-pane fade show active" id="education" role="tabpanel">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <h5 class="fw-bold text-primary mb-3">ğŸ“ Education Requests</h5>
          {% if education_campaigns %}
          <div class="table-responsive">
            <table class="table table-striped align-middle">
              <thead class="table-light">
                <tr>
                  <th>ID</th>
                  <th>Beneficiary</th>
                  <th>Status</th>
                  <th>Forwarded To</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                {% for edu in education_campaigns %}
                <tr>
                  <td>{{ edu.id }}</td>
                  <td>{{ edu.beneficiary }}</td>
                  <td>
                    <span class="badge 
                      {% if edu.status == 'Pending' %}bg-warning
                      {% elif edu.status == 'Approved' %}bg-success
                      {% elif edu.status == 'Rejected' %}bg-danger
                      {% else %}bg-info{% endif %}">{{ edu.status }}</span>
                  </td>
                  <td>{{ edu.forwarded_to|default:"â€”" }}</td>
                  <td>{{ edu.created_at|date:"d M Y" }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
          <p class="text-muted">No education campaigns available.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- ğŸ¥ Medical -->
    <div class="tab-pane fade" id="medical" role="tabpanel">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-bold text-primary">ğŸ¥ Medical Camp Requests</h5>
            <a href="{% url 'volunteer_medical_list' %}" class="btn btn-sm btn-gradient">ğŸ‘€ View Scheduled Camps</a>
          </div>

          {% if medical_campaigns %}
          <div class="table-responsive">
            <table class="table table-striped align-middle">
              <thead class="table-light">
                <tr>
                  <th>Hospital</th>
                  <th>Location</th>
                  <th>Date</th>
                  <th>Volunteer</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% for camp in medical_campaigns %}
                <tr>
                  <td>{{ camp.hospital.name }}</td>
                  <td>{{ camp.location }}</td>
                  <td>{{ camp.date|date:"M d, Y" }}</td>
                  <td>{{ camp.volunteer.username }}</td>
                  <td>
                    <span class="badge 
                      {% if camp.approval_status == 'Pending' %}bg-warning text-dark
                      {% elif camp.approval_status == 'Approved' %}bg-success
                      {% elif camp.approval_status == 'Rejected' %}bg-danger
                      {% elif camp.approval_status == 'Scheduled' %}bg-info text-dark
                      {% endif %}">
                      {{ camp.approval_status }}
                    </span>
                  </td>
                  <td>
                    {% if camp.approval_status in 'Approved Scheduled' %}
                    <a href="{% url 'schedule_medical_campaign' camp.id %}" class="btn btn-sm btn-outline-primary">
                      ğŸ“… {% if camp.scheduled_date %}Reschedule{% else %}Schedule{% endif %}
                    </a>
                    {% else %}
                    <span class="text-muted">â€”</span>
                    {% endif %}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
          <p class="text-muted">No medical camp requests available.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .btn-gradient {
    background: linear-gradient(90deg, #007bff, #00c6ff);
    color: white !important;
    border: none;
    border-radius: 20px;
    padding: 6px 14px;
    font-weight: 500;
    transition: all 0.3s ease;
  }
  .btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(0, 123, 255, 0.4);
  }
</style>
{% endblock %}
