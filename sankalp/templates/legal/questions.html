{% extends 'base.html' %}
{% block title %}Legal Q&A{% endblock %}
{% block content %}
<div class="container mt-5">
  <h2 class="text-center text-danger mb-4">ðŸ’¬ Legal Q&A Forum</h2>

  <form method="post" class="mb-4">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-danger">Ask Question</button>
  </form>

  {% for q in questions %}
  <div class="card mb-3 shadow-sm">
    <div class="card-body">
      <p class="fw-bold">Q: {{ q.question }}</p>
      {% if q.answer %}
        <p class="text-success"><b>Answer:</b> {{ q.answer }}</p>
        <small class="text-muted">Answered by {{ q.answered_by.username }} on {{ q.answered_at|date:"M d, Y" }}</small>
      {% elif request.user.role == 'Advocate' %}
        <form method="post" action="{% url 'answer_legal_question' q.id %}">
          {% csrf_token %}
          <textarea name="answer" class="form-control mb-2" rows="2" placeholder="Type your answer..."></textarea>
          <button type="submit" class="btn btn-sm btn-success">Submit Answer</button>
        </form>
      {% else %}
        <p class="text-muted fst-italic">Awaiting advocate response...</p>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
